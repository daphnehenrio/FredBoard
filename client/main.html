<head>
  <title>Server Metrics</title>
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600' rel='stylesheet' type='text/css'>
</head>

<body>
  {{> outer}}
</body>

<template name="outer">
  <div class="outer">
    <h1 class="title">Server Metrics</h1>
    {{> refreshToggle}}
    {{> meteorVersion}}
    {{> meteorServer}}
    {{> ip}}
    {{> rootUrl}}

    <hr />
    {{> mongo}}
    <hr />
    {{> board}}
    <hr />
    {{> error}}
  </div>
</template>

<template name="board">
  <ol class="board">
    {{#each metrics}}
      {{> metric}}
    {{/each}}
  </ol>
</template>

<template name="meteorVersion">
  <div class="version">Meteor JS version is <span>{{getMeteorVersion}}</span></div>
</template>

<template name="meteorServer">
  <div class="serverName {{#if isPair}}blue{{/if}}">Meteor JS server is <span>{{getMeteorServer}}</span></div>
</template>

<template name="ip">
  <div class="ip">IP is <span>{{getIpServer}}</span></div>
</template>

<template name="rootUrl">
  <div class="rootUrl">ROOT_URL : <span>{{rootUrl}}</span></div>
</template>

<template name="mongo">
  <div class="mongo">Mongo url is <span>{{getMongoUrl}}</span></div>
  <div class="mongo">The current PRIMARY mongo server is on host <span>{{getMongoPrimary.hostname}}</span> and port <span>{{getMongoPrimary.port}}</span></div>
</template>

<template name="metric">
  <li class="metric">
    <span class="label">{{label}}</span>
    <span class="data">{{data}}</span>
  </li>
</template>

<template name="refreshToggle">
  <div class="refresh">
    <label class="switch js-toggle-refresh">
      <span class="slider round {{#if checked}}checked{{/if}}"></span>
    </label>
    <span>Refresh page auto (5s)</span>
  </div>
</template>


<template name="error">
  <div class="error {{#if count}}red{{/if}}">Error counter <span>{{count}}</span></div>
</template>
